<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="contactform" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="apiUrl" expression="json-eval($.apiUrl)" />
         <property name="apiKey" expression="json-eval($.apiKey)" />
         <property name="apiOutput" expression="json-eval($.apiOutput)" />
         <property name="formId" expression="json-eval($.formId)" />
         <property name="sort" expression="json-eval($.sort)" />
         <property name="pageSize" expression="json-eval($.pageSize)" />
         <property name="pageNumber" expression="json-eval($.pageNumber)" />
         <contactform.init>
            <apiOutput>{$ctx:apiOutput}</apiOutput>
            <apiUrl>{$ctx:apiUrl}</apiUrl>
            <apiKey>{$ctx:apiKey}</apiKey>
         </contactform.init>
         <switch source="get-property('transport', 'Action')">
            <case regex="urn:listForms">
               <contactform.listForms>
               </contactform.listForms>
            </case>
            <case regex="urn:getForm">
               <contactform.getForm>
                  <formId>{$ctx:formId}</formId>
               </contactform.getForm>
            </case>
            <case regex="urn:getFields">
               <contactform.getFields>
                  <formId>{$ctx:formId}</formId>
               </contactform.getFields>
            </case>
            <case regex="urn:getFormSubmissionCount">
               <contactform.getFormSubmissionCount>
                  <formId>{$ctx:formId}</formId>
               </contactform.getFormSubmissionCount>
            </case>
            <case regex="urn:getFormSubmissions">
               <contactform.getFormSubmissions>
                  <sort>{$ctx:sort}</sort>
                  <formId>{$ctx:formId}</formId>
                  <pageSize>{$ctx:pageSize}</pageSize>
                  <pageNumber>{$ctx:pageNumber}</pageNumber>
               </contactform.getFormSubmissions>
            </case>
         </switch>
         <respond />
      </inSequence>
      <outSequence>
         <log />
         <send />
      </outSequence>
   </target>
   <description />
</proxy>
                                